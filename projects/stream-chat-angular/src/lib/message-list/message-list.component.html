<div
  #scrollContainer
  data-testid="scroll-container"
  class="str-chat__list"
  (scroll)="scrolled()"
>
  <div class="str-chat__reverse-infinite-scroll">
    <ul class="str-chat__ul">
      <li
        data-testclass="message"
        *ngFor="
          let message of messages$ | async;
          let i = index;
          trackBy: trackByMessageId
        "
        class="str-chat__li str-chat__li--{{ groupStyles[i] }}"
        id="{{ message.id }}"
      >
        <ng-container *ngIf="messageTemplate; else defaultMessageTemplate">
          <ng-container
            *ngTemplateOutlet="
              messageTemplate;
              context: {
                message: message,
                areReactionsEnabled: areReactionsEnabled,
                canReactToMessage: canReactToMessage,
                lastSentMessageId: !!(
                  lastSentMessageId && message?.id === lastSentMessageId
                ),
                canReceiveReadEvents: canReceiveReadEvents,
                messageInputTemplate: messageInputTemplate,
                mentionTemplate: mentionTemplate
              }
            "
          ></ng-container>
        </ng-container>
        <ng-template #defaultMessageTemplate>
          <stream-message
            [message]="message"
            [areReactionsEnabled]="areReactionsEnabled"
            [canReactToMessage]="canReactToMessage"
            [isLastSentMessage]="
              !!(lastSentMessageId && message?.id === lastSentMessageId)
            "
            [enabledMessageActions]="enabledMessageActions"
            [canReceiveReadEvents]="canReceiveReadEvents"
            [messageInputTemplate]="messageInputTemplate"
            [mentionTemplate]="mentionTemplate"
          ></stream-message>
        </ng-template>
      </li>
    </ul>
  </div>
</div>
<div class="str-chat__list-notifications">
  <button
    data-testid="scroll-to-bottom"
    *ngIf="isUserScrolledUp"
    class="
      str-chat__message-notification
      str-chat__message-notification-right
      str-chat__message-notification-scroll-down
    "
    (keyup.enter)="scrollToBottom()"
    (click)="scrollToBottom()"
  >
    <div
      *ngIf="unreadMessageCount > 0"
      class="
        str-chat__message-notification
        str-chat__message-notification-scroll-down-unread-count
      "
    >
      {{ unreadMessageCount }}
    </div>
  </button>
</div>
